ID,Category,Title,Preconditions,Steps,Expected Result,Priority
TC-REG-001,User Registration,Successful user registration with valid data,None,"1. Send POST /api/users with valid email, password (6+ chars), phone (10+ digits)
2. Verify response","- Status: 201
- Response contains userId, email, phone
- kycStatus = ""no_documents""
- kycVerifiedAt = null
- Success message returned",P0
TC-REG-002,User Registration,Registration fails with invalid email format,None,"1. Send POST /api/users with email ""invalid-email""
2. Verify response","- Status: 400
- Error message: ""Invalid email format""
- success = false",P1
TC-REG-003,User Registration,Registration fails with short password,None,"1. Send POST /api/users with password ""12345"" (5 chars)
2. Verify response","- Status: 400
- Error message: ""Password must be at least 6 characters long""
- success = false",P1
TC-REG-004,User Registration,Registration fails with invalid phone number,None,"1. Send POST /api/users with phone ""123"" (too short)
2. Verify response","- Status: 400
- Error message: ""Invalid phone number format""
- success = false",P1
TC-REG-005,User Registration,Registration fails with duplicate email,User already registered with email test@example.com,"1. Send POST /api/users with same email
2. Verify response","- Status: 409
- Error message: ""User with this email already exists""
- success = false",P1
TC-REG-006,User Registration,Registration fails with duplicate phone number,User already registered with phone +1234567890,"1. Send POST /api/users with different email but same phone
2. Verify response","- Status: 409
- Error message: ""Phone number is already registered by another user""
- success = false",P1
TC-REG-007,User Registration,Registration fails with missing required fields,None,"1. Send POST /api/users with empty email field
2. Verify response","- Status: 400
- Error message: ""Email, password, and phone number are required""
- success = false",P1
TC-REG-008,User Registration,Retrieve user information by userId,User registered successfully,"1. Register user and capture userId
2. Send GET /api/users/{userId}
3. Verify response","- Status: 200
- Response contains correct user data
- Email and phone match registration
- kycStatus reflects current state",P1
TC-KYC-001,KYC Verification,Upload valid document and verify status transition,User registered with kycStatus = no_documents,"1. Upload document with ""valid"" in filename
2. Verify immediate response
3. Wait 2-20 seconds
4. Check KYC status","- Upload response: status = ""validating""
- After verification: kycStatus = ""valid""
- kycVerifiedAt timestamp set
- Document appears in documents array",P0
TC-KYC-002,KYC Verification,Upload invalid document and verify rejection,User registered with kycStatus = no_documents,"1. Upload document without ""valid"" in filename
2. Verify immediate response
3. Wait 2-20 seconds
4. Check KYC status","- Upload response: status = ""validating""
- After verification: kycStatus = ""invalid""
- kycVerifiedAt = null
- Can upload another document",P1
TC-KYC-003,KYC Verification,Document upload fails for non-existent user,None,"1. Send POST /api/kyc/{fake-user-id} with document
2. Verify response","- Status: 404
- Error message: ""User not found""
- success = false",P1
TC-KYC-004,KYC Verification,Document upload fails when KYC already valid,User with kycStatus = valid,"1. Attempt to upload another document
2. Verify response","- Status: 400
- Error message: ""KYC is already completed for this user""
- success = false",P1
TC-KYC-005,KYC Verification,Document upload fails with wrong file type,User registered,"1. Upload .txt file instead of PDF/JPEG/PNG
2. Verify response","- Status: 400
- Error message: ""Invalid file type. Only JPEG, PNG, JPG, and PDF files are allowed.""
- success = false",P1
TC-KYC-006,KYC Verification,Document upload fails with oversized file,User registered,"1. Upload file larger than 5MB
2. Verify response","- Status: 400
- Error message: ""File too large. Maximum size is 5MB.""
- success = false",P1
TC-KYC-007,KYC Verification,Get KYC status for user with no documents,"User registered, no uploads","1. Send GET /api/kyc/{userId}
2. Verify response","- Status: 200
- kycStatus = ""no_documents""
- documents array is empty
- kycVerifiedAt = null",P1
TC-KYC-008,KYC Verification,Retry document upload after invalid verification,User with kycStatus = invalid,"1. Upload new document with ""valid"" in filename
2. Wait for verification
3. Check final status","- Upload accepted
- New verification starts
- kycStatus transitions to ""valid""
- Multiple documents in documents array",P1
TC-KYC-009,KYC Verification,KYC status transitions correctly during async verification,User registered,"1. Upload document
2. Immediately check status (should be ""validating"")
3. Poll status every 3 seconds
4. Verify final status after 2-20 seconds","- Initial: ""no_documents""
- After upload: ""validating""
- After verification: ""valid"" or ""invalid""
- Status transitions are atomic",P0
TC-KYC-010,KYC Verification,Multiple document uploads tracked correctly,User registered,"1. Upload invalid document
2. Wait for verification
3. Upload valid document
4. Get KYC status
5. Verify documents array","- documents array contains 2 entries
- Each document has unique id
- Each has correct status
- Timestamps are sequential",P2
TC-E2E-001,End-to-End UI,Complete user registration flow via UI,Web app running on localhost:3001,"1. Navigate to registration page
2. Fill email, password, phone
3. Click Register button
4. Verify redirect","- Form accepts input
- Registration succeeds
- User redirected to dashboard/KYC page
- No error messages shown",P0
TC-E2E-002,End-to-End UI,UI shows validation error for invalid email,Web app running,"1. Navigate to registration page
2. Enter invalid email format
3. Fill other fields
4. Submit form","- Error message displayed
- Message mentions ""email""
- Form not submitted
- User remains on page",P1
TC-E2E-003,End-to-End UI,Complete KYC upload flow via UI,User registered and logged in,"1. Navigate to KYC upload page
2. Upload valid document
3. Wait for verification
4. Verify status updates","- Upload area visible
- File upload succeeds
- ""Validating"" status shown
- Status updates to ""Valid""
- Features become accessible",P0
TC-E2E-004,End-to-End UI,UI prevents access to features before KYC,"User registered, no KYC","1. Attempt to access payment features
2. Verify restrictions","- Features section disabled/hidden
- Message prompts KYC completion
- Upload area is visible",P1
TC-EDGE-001,Edge Cases,Password exactly 6 characters,None,"1. Register with password ""123456""
2. Verify acceptance","- Registration succeeds
- Password meets minimum requirement",P2
TC-EDGE-002,Edge Cases,Phone number exactly 10 digits,None,"1. Register with phone ""+1234567890""
2. Verify acceptance","- Registration succeeds
- Phone meets minimum requirement",P2
TC-EDGE-003,Edge Cases,Document exactly 5MB,User registered,"1. Upload 5MB file
2. Verify acceptance","- Upload succeeds
- File size at boundary accepted",P2
TC-EDGE-004,Edge Cases,Special characters in email,None,"1. Register with email ""test+tag@example.com""
2. Verify handling","- Valid email format accepted
- Special chars handled correctly",P2
TC-EDGE-005,Edge Cases,Concurrent registrations with same email,None,"1. Send 2 parallel POST requests with same email
2. Verify responses","- One succeeds (201)
- One fails with 409 conflict
- No duplicate users created",P2
